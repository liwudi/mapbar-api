<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">
    <title>自定义信息窗口</title>
    <meta name="description" content="">
    <style type="text/css">
        html, body, #mapDiv {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
        }
        .customBubble{
            position:absolute;
            width:256px;
            height:auto;
            left: -125px;
            top: -80px;
            background:white;
            box-sizing: border-box;
            box-shadow: 1px 2px 1px rgba(0,0,0,.35);
            border-radius: 4px
        }
        .customBubble .title{

            font-size: 14px;
            line-height: 35px;
            border-bottom: 1px solid #CCCCCC;
        }
        .customBubble .arrow{
            width: 0;
            height: 0;
            border-left: 5px solid transparent;
            border-right: 5px solid transparent;
            border-top: 8px solid white;
            position: absolute;
            margin-top:0px;
            margin-left:120px;
        }
        .customBubble .content{
            padding: 5px;
            font-size: 12px;
            color: #333333
        }
    </style>
</head>
<body>
<div id="mapDiv"></div>

<!-- 自定义气泡Dom结构 -->
<div id="customBubble" class="customBubble">

    <div class="title">自定义标题</div>
    <div class="content">
        自定义内容...

    </div>
    <div class="arrow"></div>
</div>

<script type="text/javascript" src="http://api.mapbar.com/api/mapbard31.3.js"></script>
<script type="text/javascript">
    var maplet = null,
        marker = null,
        center = new MPoint("116.39748,39.90881"),
        point = new MPoint("116.39748,39.82881");

    function initMap() {
        maplet = new Maplet("mapDiv");
        maplet.centerAndZoom(center, 11);
        maplet.showOverview(true, false);
        maplet.addControl(new MStandardControl());
        maplet.customInfoWindow = true;

        marker = new MMarker(
            point,
            new MIcon("http://union.mapbar.com/apidoc/images/tb1.gif", 32, 32)
        );
        maplet.addOverlay(marker);
    };

    //自定义气泡
    function initBubble() {
        var bubbleDom = document.getElementById("customBubble");
        var options = {
            pin: true,
            zindex: 6,
            content: bubbleDom,
            zoomhide: true
        };
        p = new MPanel(options);
        p.setLocation({
            x: marker.pt.mapX,
            y: marker.pt.mapY
        });
        maplet.addPanel(p);
    }

    window.onload = function() {
        initMap();
        initBubble();
    };
</script>
</body>
</html>